# ==============================================================================
# EJEMPLO DE CONFIGURACIÓN PARA SEGUNDA INSTANCIA DE AIRFLOW
# ==============================================================================
# Este es un ejemplo de configuración para una segunda instancia de Airflow
# corriendo en el mismo servidor que la primera instancia.
#
# PASOS PARA USAR ESTE ARCHIVO:
# 1. Copia todo el proyecto a un nuevo directorio:
#    cp -r airflow_develop airflow_develop_2
#    cd airflow_develop_2
#
# 2. Copia este archivo a .env:
#    cp .env.instance2.example .env
#
# 3. Ajusta los valores según tus necesidades
#
# 4. Crea la base de datos en PostgreSQL (ver SQL al final)
#
# 5. Inicia la instancia: make build && make start
# ==============================================================================

# Nombre del proyecto/instancia (DEBE ser diferente a otras instancias)
PROJECT_NAME=airflow2

# ==============================================================================
# CONFIGURACIÓN DE USUARIO Y PERMISOS
# ==============================================================================
AIRFLOW_UID=50000
AIRFLOW_GID=0

# ==============================================================================
# CONFIGURACIÓN DE POSTGRESQL
# ==============================================================================
# Servidor PostgreSQL (puede ser el mismo para todas las instancias)
POSTGRES_HOST=192.168.24.109
POSTGRES_PORT=5433

# Base de datos específica para esta instancia (DEBE ser diferente)
POSTGRES_DB=airflow_db_instance2
POSTGRES_USER=airflow_user_instance2
POSTGRES_PASSWORD=airflow2025_instance2

# ==============================================================================
# CONFIGURACIÓN DE PUERTOS
# ==============================================================================
# Puerto del webserver (DEBE ser diferente a otras instancias)
AIRFLOW_WEBSERVER_PORT=4001

# ==============================================================================
# CLAVES DE SEGURIDAD
# ==============================================================================
# IMPORTANTE: Cada instancia DEBE tener sus propias claves únicas
# NO reutilices las claves de otra instancia

# Clave Fernet para encriptación (generar nueva)
# Generar con: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
AIRFLOW_FERNET_KEY=NUEVA_CLAVE_FERNET_AQUI

# Secret para autenticación JWT (generar nuevo)
# Generar con: openssl rand -base64 16
AIRFLOW_JWT_SECRET=NUEVO_JWT_SECRET_AQUI

# Secret para API interna (cambiar por uno único)
AIRFLOW_INTERNAL_API_SECRET=airflow-internal-api-secret-instance2

# ==============================================================================
# CONFIGURACIÓN DE USUARIO WEB
# ==============================================================================
AIRFLOW_WWW_USER_USERNAME=airflow
AIRFLOW_WWW_USER_PASSWORD=airflow

# ==============================================================================
# CONFIGURACIÓN DE DIRECTORIOS
# ==============================================================================
AIRFLOW_PROJ_DIR=.

# ==============================================================================
# CONFIGURACIÓN ADICIONAL (OPCIONAL)
# ==============================================================================
_PIP_ADDITIONAL_REQUIREMENTS=

# ==============================================================================
# CONEXIONES SMTP
# ==============================================================================
# Conexión SMTP para envío de emails desde DAGs
# Formato: smtp://[usuario:password@]host:puerto/?from_email=email_origen
AIRFLOW_CONN_SMTP_IDESA=smtp://:@192.168.250.30:25/?from_email=airflow@idesa.com.py

# ==============================================================================
# CONEXIONES POSTGRESQL
# ==============================================================================
# Conexión PostgreSQL IDESA para consultas desde DAGs
# Formato: postgresql://usuario:password@host:puerto/database
# NOTA: Caracteres especiales en password deben ser URL-encoded (@ = %40, etc.)
AIRFLOW_CONN_POSTGRES_IDESA=postgresql://postgres:5PASzT0%40iB@192.168.24.109:5433/planos

# ==============================================================================
# SQL PARA CREAR LA BASE DE DATOS EN POSTGRESQL
# ==============================================================================
# Ejecuta estos comandos en PostgreSQL antes de iniciar esta instancia:
#
# CREATE USER airflow_user_instance2 WITH PASSWORD 'airflow2025_instance2';
# CREATE DATABASE airflow_db_instance2 OWNER airflow_user_instance2;
# GRANT ALL PRIVILEGES ON DATABASE airflow_db_instance2 TO airflow_user_instance2;
# ==============================================================================
