# ==============================================================================
# CONFIGURACIÓN DE INSTANCIA AIRFLOW
# ==============================================================================
# Copia este archivo a .env y ajusta los valores según tu instancia
# Para múltiples instancias, usa diferentes valores de PROJECT_NAME y puertos

# Nombre del proyecto/instancia (usado para nombres de contenedores)
# Cambia este valor para cada instancia: airflow1, airflow2, etc.
PROJECT_NAME=airflow1

# ==============================================================================
# CONFIGURACIÓN DE USUARIO Y PERMISOS
# ==============================================================================
AIRFLOW_UID=50000
AIRFLOW_GID=0

# ==============================================================================
# CONFIGURACIÓN DE POSTGRESQL
# ==============================================================================
# Servidor PostgreSQL (puede ser compartido entre instancias)
POSTGRES_HOST=192.168.24.109
POSTGRES_PORT=5433

# Base de datos específica para esta instancia
# IMPORTANTE: Cada instancia debe tener su propia base de datos
POSTGRES_DB=airflow_db_instance1
POSTGRES_USER=airflow_user_instance1
POSTGRES_PASSWORD=airflow2025_instance1

# ==============================================================================
# CONFIGURACIÓN DE PUERTOS
# ==============================================================================
# Puerto del webserver (DEBE ser único por instancia)
# Instancia 1: 4000
# Instancia 2: 4001
# Instancia 3: 4002, etc.
AIRFLOW_WEBSERVER_PORT=4000

# ==============================================================================
# CLAVES DE SEGURIDAD
# ==============================================================================
# IMPORTANTE: Cada instancia DEBE tener sus propias claves únicas

# Clave Fernet para encriptación de conexiones/variables
# Generar con: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
AIRFLOW_FERNET_KEY=9bWr2sEbBAdQRT-KiMrxxjK7-p40nLDPuGh0ClxxGTI=

# Secret para autenticación JWT entre componentes internos
# Generar con: openssl rand -base64 16
AIRFLOW_JWT_SECRET=J36k1mlhOjJfGnpx1DjeTA==

# Secret para API interna
AIRFLOW_INTERNAL_API_SECRET=airflow-internal-api-secret-2025

# ==============================================================================
# CONFIGURACIÓN DE USUARIO WEB (Airflow 3.x)
# ==============================================================================
# Usuario y contraseña para acceso web
# La contraseña se genera automáticamente al iniciar si no se especifica
AIRFLOW_WWW_USER_USERNAME=airflow
AIRFLOW_WWW_USER_PASSWORD=airflow

# ==============================================================================
# CONFIGURACIÓN DE DIRECTORIOS
# ==============================================================================
# Directorio raíz del proyecto (normalmente el directorio actual)
AIRFLOW_PROJ_DIR=.

# ==============================================================================
# CONFIGURACIÓN ADICIONAL (OPCIONAL)
# ==============================================================================
# Paquetes Python adicionales a instalar
_PIP_ADDITIONAL_REQUIREMENTS=

# ==============================================================================
# NOTAS IMPORTANTES PARA MÚLTIPLES INSTANCIAS
# ==============================================================================
#
# Para correr una segunda instancia en el mismo servidor:
#
# 1. Crea un nuevo directorio para la instancia 2:
#    cp -r airflow_develop airflow_develop_2
#    cd airflow_develop_2
#
# 2. Crea/edita el archivo .env con valores diferentes:
#    PROJECT_NAME=airflow2
#    AIRFLOW_WEBSERVER_PORT=4001
#    POSTGRES_DB=airflow_db_instance2
#    POSTGRES_USER=airflow_user_instance2
#    POSTGRES_PASSWORD=airflow2025_instance2
#    AIRFLOW_FERNET_KEY=<nueva clave generada>
#    AIRFLOW_JWT_SECRET=<nuevo secret generado>
#
# 3. Crea la base de datos en PostgreSQL:
#    CREATE USER airflow_user_instance2 WITH PASSWORD 'airflow2025_instance2';
#    CREATE DATABASE airflow_db_instance2 OWNER airflow_user_instance2;
#    GRANT ALL PRIVILEGES ON DATABASE airflow_db_instance2 TO airflow_user_instance2;
#
# 4. Inicia la instancia:
#    make build
#    make start
#
# 5. Accede a cada instancia:
#    Instancia 1: http://localhost:4000
#    Instancia 2: http://localhost:4001
# ==============================================================================
